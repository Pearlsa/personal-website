<!doctype html><html><head><title>Deploying Go as a binary on Heroku - charlieegan3</title><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta name=description content="Here are the steps to deploy a &ldquo;Hello World&rdquo; Go app on Heroku as a binary - rather than the method outlined in their tutorial which uses GoDeps."><meta name=twitter:card content="summary"><meta name=twitter:site content="@charlieegan3"><meta name=twitter:creator content="@charlieegan3"><meta property="og:url" content="https://charlieegan3.com/posts/2015-12-26-deploying-go-as-a-binary-on-heroku/"><meta property="og:title" content="Deploying Go as a binary on Heroku"><meta property="og:description" content="Here are the steps to deploy a &ldquo;Hello World&rdquo; Go app on Heroku as a binary - rather than the method outlined in their tutorial which uses GoDeps."><meta property="og:type" content="article"><meta name=author content="Charlie Egan"><meta property="article:author" content="https://twitter.com/charlieegan3"><meta property="article:published_time" content="2015-12-26T13:05:00"><link rel=stylesheet type=text/css href=/css/bundle.min.c144bb18591ee3d9ef85fb73056afa69f6c8fa31188080cb491de5b71bbf36e1.css><script type=text/javascript src=/js/bundle.min.76c0ad1f61fe83a23628b79ecc5aa835224071f00c5f2a4fbbdf26765027d8e7.js integrity="sha256-dsCtH2H+g6I2KLeezFqoNSJAcfAMXypPu98mdlAn2Oc="></script></head><body class="bg-darker-gray light-silver"><section class="mw7 center pa3 ph5-ns pb5"><nav class=sidebar-nav><a href=/ title=homepage>home</a>
<a href=/about/ title="read all about it">about</a>
<a class="bb bw1 b--silver" href=/posts/ title="view my blog posts">posts</a>
<a href=/projects/ title="view my projects">projects</a>
<a href=/profiles/ title="find me elsewhere">profiles</a>
<a href=/search><img class="fr grow" style=width:20px;filer:invert(.75);-webkit-filter:invert(.75) src=/search.svg></a></nav><h1 class="f3-ns f4">Deploying Go as a binary on Heroku</h1><div class="f5-ns f6 gray bb bw1 pb2 b--dark-gray">Posted Dec 26 2015</div><div class=post-content><p>Here are the steps to deploy a &ldquo;Hello World&rdquo; Go app on Heroku as a binary - rather than the method outlined in their <a href=https://www.heroku.com/go#see-it-in-action>tutorial</a> which uses GoDeps.</p><p>These instructions are based somewhat on those for the <a href=https://github.com/ph3nx/heroku-binary-buildpack>heroku-binary-buildpack</a>.</p><ol><li><p>Create a Heroku app for the project:</p><pre><code> create APP_NAME --buildpack https://github.com/ph3nx/heroku-binary-buildpack.git
</code></pre></li><li><p>Setup the working directory by cloning from the Heroku remote:</p><pre><code> heroku git:clone --app APP_NAME
</code></pre></li><li><p>Create a simple Go app, <code>server.go</code>:</p><pre><code> package main

 import (
     &quot;fmt&quot;
     &quot;net/http&quot;
     &quot;os&quot;
 )

 func handler(w http.ResponseWriter, r *http.Request) {
     fmt.Fprintf(w, &quot;Hello World. Path: %v&quot;, r.URL.Path[1:])
 }

 func main() {
     fmt.Printf(&quot;Port: %v\n&quot;, os.Args[1])
     http.HandleFunc(&quot;/&quot;, handler)
     http.ListenAndServe(&quot;:&quot;+os.Args[1], nil)
 }
</code></pre></li><li><p>Compile the app for Linux 64bit:</p><pre><code> CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build
</code></pre></li><li><p>Create a <code>bin</code> directory and move the Linux binary into it - called <code>server</code> or something similar.</p><pre><code> mkdir bin
 mv APP_NAME bin/server
</code></pre></li><li><p>Create a simple <code>Procfile</code> in the project root to run the app under a web dyno.</p><pre><code> web: program $PORT
</code></pre></li><li><p>Add the app&rsquo;s <code>bin</code> directory to the PATH on Heroku:</p><pre><code> heroku config:set PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/app/bin
</code></pre></li><li><p>Commit the lot and push it to Heroku:</p><pre><code> git add --all
 git commit -m &quot;First Commit&quot;
 git push heroku master
</code></pre></li><li><p>Scale the app on Heroku:</p><pre><code> heroku ps:scale web=1
</code></pre></li><li><p>Open the app that&rsquo;s now running:</p><pre><code>heroku open
</code></pre></li></ol><hr><h2 id=todo>Todo</h2><ul><li>Devise a way to keep the binary out of version control, likely using a temporary release branch to push to the Heroku master.</li></ul></div></section></body></html>